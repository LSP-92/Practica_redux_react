{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/lsp-92/Proyectos/practica-react-avanzado/react-app/src/components/shared/InputImage/InputImage.js\";\nimport React from 'react';\nimport T from 'prop-types';\nimport { Image, Button } from 'antd';\nimport { DeleteOutlined } from '@ant-design/icons';\nimport placeholder from '../../../assets/photo-placeholder.png'; // NOTE: module css example\n// When import from css module, it resolves to something like that\n// styles = {\n//   container: \"InputImage_container__4H_Sr\"\n//   image: \"InputImage_image__9U_Ck\"\n// }\n\nimport styles from './InputImage.module.css';\n\nclass InputImage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      src: placeholder\n    };\n    this.inputRef = /*#__PURE__*/React.createRef(null);\n\n    this.readFile = file => {\n      const {\n        onChange\n      } = this.props;\n\n      const setSrc = src => this.setState({\n        src\n      }, () => {\n        if (onChange) onChange(file);\n      });\n\n      if (!file) {\n        setSrc(placeholder);\n      } else {\n        const reader = new FileReader();\n\n        reader.onload = function () {\n          setSrc(reader.result);\n        };\n\n        reader.readAsDataURL(file);\n      }\n    };\n\n    this.handleClick = () => {\n      const {\n        src\n      } = this.state;\n      const {\n        current: fileInput\n      } = this.inputRef;\n\n      if (src === placeholder) {\n        fileInput.click();\n      }\n    };\n\n    this.handleDeleteClick = () => {\n      const {\n        current: fileInput\n      } = this.inputRef;\n      fileInput.value = null;\n      this.readFile(null);\n    };\n\n    this.handleChange = ev => {\n      const [file] = ev.target.files;\n      this.readFile(file);\n    };\n  }\n\n  render() {\n    const {\n      onChange,\n      ...props\n    } = this.props;\n    const {\n      src\n    } = this.state;\n    const isSrcLoaded = src !== placeholder;\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/png, image/jpeg, image/gif\",\n        ref: this.inputRef,\n        onChange: this.handleChange,\n        style: {\n          display: 'none'\n        },\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.container,\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          className: styles.image,\n          fallback: placeholder,\n          height: 200,\n          preview: isSrcLoaded,\n          src: src,\n          width: 200,\n          onClick: this.handleClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), isSrcLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.overlay,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            className: styles.button,\n            danger: true,\n            icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 23\n            }, this),\n            onClick: this.handleDeleteClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nInputImage.propTypes = {\n  onChange: T.func\n};\nexport default InputImage;","map":{"version":3,"sources":["/home/lsp-92/Proyectos/practica-react-avanzado/react-app/src/components/shared/InputImage/InputImage.js"],"names":["React","T","Image","Button","DeleteOutlined","placeholder","styles","InputImage","Component","state","src","inputRef","createRef","readFile","file","onChange","props","setSrc","setState","reader","FileReader","onload","result","readAsDataURL","handleClick","current","fileInput","click","handleDeleteClick","value","handleChange","ev","target","files","render","isSrcLoaded","display","container","image","overlay","button","propTypes","func"],"mappings":"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","sourcesContent":["import React from 'react';\nimport T from 'prop-types';\nimport { Image, Button } from 'antd';\nimport { DeleteOutlined } from '@ant-design/icons';\n\nimport placeholder from '../../../assets/photo-placeholder.png';\n// NOTE: module css example\n// When import from css module, it resolves to something like that\n// styles = {\n//   container: \"InputImage_container__4H_Sr\"\n//   image: \"InputImage_image__9U_Ck\"\n// }\nimport styles from './InputImage.module.css';\n\nclass InputImage extends React.Component {\n  state = {\n    src: placeholder,\n  };\n\n  inputRef = React.createRef(null);\n\n  readFile = file => {\n    const { onChange } = this.props;\n    const setSrc = src =>\n      this.setState({ src }, () => {\n        if (onChange) onChange(file);\n      });\n\n    if (!file) {\n      setSrc(placeholder);\n    } else {\n      const reader = new FileReader();\n      reader.onload = function () {\n        setSrc(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  handleClick = () => {\n    const { src } = this.state;\n    const { current: fileInput } = this.inputRef;\n    if (src === placeholder) {\n      fileInput.click();\n    }\n  };\n\n  handleDeleteClick = () => {\n    const { current: fileInput } = this.inputRef;\n    fileInput.value = null;\n    this.readFile(null);\n  };\n\n  handleChange = ev => {\n    const [file] = ev.target.files;\n    this.readFile(file);\n  };\n\n  render() {\n    const { onChange, ...props } = this.props;\n    const { src } = this.state;\n\n    const isSrcLoaded = src !== placeholder;\n\n    return (\n      <React.Fragment>\n        <input\n          type=\"file\"\n          accept=\"image/png, image/jpeg, image/gif\"\n          ref={this.inputRef}\n          onChange={this.handleChange}\n          style={{ display: 'none' }}\n          {...props}\n        />\n        {/*\n          styles.container is a unique class name,\n          something like \"InputImage_container__9U_Ck\"\n        */}\n        <div className={styles.container}>\n          <Image\n            className={styles.image}\n            fallback={placeholder}\n            height={200}\n            preview={isSrcLoaded}\n            src={src}\n            width={200}\n            onClick={this.handleClick}\n          />\n          {isSrcLoaded && (\n            <div className={styles.overlay}>\n              <Button\n                type=\"primary\"\n                className={styles.button}\n                danger\n                icon={<DeleteOutlined />}\n                onClick={this.handleDeleteClick}\n              />\n            </div>\n          )}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nInputImage.propTypes = {\n  onChange: T.func,\n};\n\nexport default InputImage;\n"]},"metadata":{},"sourceType":"module"}