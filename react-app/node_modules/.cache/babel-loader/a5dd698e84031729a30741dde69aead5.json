{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/lsp-92/Proyectos/practica-react-avanzado/react-app/src/components/adverts/NewAdvertPage/NewAdvertForm.js\";\nimport React from 'react';\nimport T from 'prop-types';\nimport { Button, Radio, Input, InputNumber, Row, Col } from 'antd';\nimport TagsSelect from '../TagsSelect';\nimport { FormField, InputImage } from '../../shared';\nimport * as numbers from '../../../utils/numbers';\nimport { saleOptions, MIN_PRICE, MAX_PRICE } from '../definitions';\nimport styles from './NewAdvertForm.module.css';\n\nclass NewAdvertForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: '',\n      price: 0,\n      tags: [],\n      photo: null,\n      sale: saleOptions.sell.value\n    };\n\n    this.canSubmit = () => {\n      const {\n        name,\n        price,\n        tags\n      } = this.state;\n      return [// valid name\n      !!name, // valid price\n      !Number.isNaN(price) && Number.isFinite(price) && price >= 0, // valid tags\n      !!tags.length].every(validation => validation); // all validations pass\n    };\n\n    this.getFormData = () => {\n      const {\n        name,\n        price,\n        tags,\n        sale,\n        photo\n      } = this.state;\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('sale', sale === saleOptions.sell.value);\n      formData.append('price', price);\n      tags.forEach((tag, index) => formData.append(`tags[${index}]`, tag));\n      if (photo) formData.append('photo', photo);\n      return formData;\n    };\n\n    this.handleNameChange = ev => this.setState({\n      name: ev.target.value\n    });\n\n    this.handlePriceChange = price => this.setState({\n      price\n    });\n\n    this.handleTagsChange = tags => this.setState({\n      tags\n    });\n\n    this.handlePhotoChange = photo => this.setState({\n      photo\n    });\n\n    this.handleSaleChange = ev => this.setState({\n      sale: ev.target.value\n    });\n\n    this.handleSubmit = ev => {\n      const {\n        onSubmit\n      } = this.props;\n      ev.preventDefault();\n      onSubmit(this.getFormData());\n    };\n  }\n\n  render() {\n    const {\n      name,\n      price,\n      tags,\n      sale\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: styles.form,\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          span: 11,\n          children: [/*#__PURE__*/_jsxDEV(FormField, {\n            label: \"Name\",\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Name\",\n              onChange: this.handleNameChange,\n              value: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            label: \"Price\",\n            children: /*#__PURE__*/_jsxDEV(InputNumber, { ...numbers,\n              className: styles.price,\n              min: MIN_PRICE,\n              max: MAX_PRICE,\n              onChange: this.handlePriceChange,\n              value: price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 11,\n          offset: 2,\n          children: [/*#__PURE__*/_jsxDEV(FormField, {\n            label: \"Tags\",\n            children: /*#__PURE__*/_jsxDEV(TagsSelect, {\n              onChange: this.handleTagsChange,\n              value: tags\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            label: \"Type\",\n            children: /*#__PURE__*/_jsxDEV(Radio.Group, {\n              options: [saleOptions.sell, saleOptions.buy],\n              onChange: this.handleSaleChange,\n              value: sale\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 24,\n          children: [/*#__PURE__*/_jsxDEV(FormField, {\n            label: \"Photo\",\n            children: /*#__PURE__*/_jsxDEV(InputImage, {\n              type: \"file\",\n              onChange: this.handlePhotoChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: styles.button,\n            type: \"primary\",\n            htmlType: \"submit\",\n            disabled: !this.canSubmit(),\n            block: true,\n            children: \"Up!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nNewAdvertForm.propTypes = {\n  onSubmit: T.func.isRequired\n};\nexport default NewAdvertForm;","map":{"version":3,"sources":["/home/lsp-92/Proyectos/practica-react-avanzado/react-app/src/components/adverts/NewAdvertPage/NewAdvertForm.js"],"names":["React","T","Button","Radio","Input","InputNumber","Row","Col","TagsSelect","FormField","InputImage","numbers","saleOptions","MIN_PRICE","MAX_PRICE","styles","NewAdvertForm","Component","state","name","price","tags","photo","sale","sell","value","canSubmit","Number","isNaN","isFinite","length","every","validation","getFormData","formData","FormData","append","forEach","tag","index","handleNameChange","ev","setState","target","handlePriceChange","handleTagsChange","handlePhotoChange","handleSaleChange","handleSubmit","onSubmit","props","preventDefault","render","form","buy","button","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport T from 'prop-types';\nimport { Button, Radio, Input, InputNumber, Row, Col } from 'antd';\n\nimport TagsSelect from '../TagsSelect';\nimport { FormField, InputImage } from '../../shared';\nimport * as numbers from '../../../utils/numbers';\n\nimport { saleOptions, MIN_PRICE, MAX_PRICE } from '../definitions';\n\nimport styles from './NewAdvertForm.module.css';\n\nclass NewAdvertForm extends React.Component {\n  state = {\n    name: '',\n    price: 0,\n    tags: [],\n    photo: null,\n    sale: saleOptions.sell.value,\n  };\n\n  canSubmit = () => {\n    const { name, price, tags } = this.state;\n\n    return [\n      // valid name\n      !!name,\n      // valid price\n      !Number.isNaN(price) && Number.isFinite(price) && price >= 0,\n      // valid tags\n      !!tags.length,\n    ].every(validation => validation); // all validations pass\n  };\n\n  getFormData = () => {\n    const { name, price, tags, sale, photo } = this.state;\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('sale', sale === saleOptions.sell.value);\n    formData.append('price', price);\n    tags.forEach((tag, index) => formData.append(`tags[${index}]`, tag));\n    if (photo) formData.append('photo', photo);\n    return formData;\n  };\n\n  handleNameChange = ev => this.setState({ name: ev.target.value });\n  handlePriceChange = price => this.setState({ price });\n  handleTagsChange = tags => this.setState({ tags });\n  handlePhotoChange = photo => this.setState({ photo });\n  handleSaleChange = ev => this.setState({ sale: ev.target.value });\n\n  handleSubmit = ev => {\n    const { onSubmit } = this.props;\n    ev.preventDefault();\n    onSubmit(this.getFormData());\n  };\n\n  render() {\n    const { name, price, tags, sale } = this.state;\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <Row className={styles.form}>\n          <Col span={11}>\n            <FormField label=\"Name\">\n              <Input\n                placeholder=\"Name\"\n                onChange={this.handleNameChange}\n                value={name}\n              />\n            </FormField>\n            <FormField label=\"Price\">\n              <InputNumber\n                {...numbers}\n                className={styles.price}\n                min={MIN_PRICE}\n                max={MAX_PRICE}\n                onChange={this.handlePriceChange}\n                value={price}\n              />\n            </FormField>\n          </Col>\n          <Col span={11} offset={2}>\n            <FormField label=\"Tags\">\n              <TagsSelect onChange={this.handleTagsChange} value={tags} />\n            </FormField>\n            <FormField label=\"Type\">\n              <Radio.Group\n                options={[saleOptions.sell, saleOptions.buy]}\n                onChange={this.handleSaleChange}\n                value={sale}\n              />\n            </FormField>\n          </Col>\n          <Col span={24}>\n            <FormField label=\"Photo\">\n              <InputImage type=\"file\" onChange={this.handlePhotoChange} />\n            </FormField>\n            <Button\n              className={styles.button}\n              type=\"primary\"\n              htmlType=\"submit\"\n              disabled={!this.canSubmit()}\n              block\n            >\n              Up!\n            </Button>\n          </Col>\n        </Row>\n      </form>\n    );\n  }\n}\n\nNewAdvertForm.propTypes = {\n  onSubmit: T.func.isRequired,\n};\n\nexport default NewAdvertForm;\n"]},"metadata":{},"sourceType":"module"}